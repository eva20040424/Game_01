:: Start
/* CSSï¼šDOL é¢¨æ ¼æ¨£å¼è¡¨ï¼ˆåƒ…ä½œç”¨æ–¼æ­¤é é¢å®¹å™¨ï¼‰ */
<style>
    /* ä¸»å®¹å™¨ï¼šç½®ä¸­ã€é»‘åº•ã€é‚Šæ¡† */
    .dol-container {
        max-width: 500px;
        margin: 5vh auto;
        padding: 20px;
        background-color: #111; /* æ·±è‰²èƒŒæ™¯ */
        border: 2px solid #444; /* ç°è‰²é‚Šæ¡† */
        box-shadow: 0 0 10px rgba(0,0,0,0.8);
        font-family: "Microsoft JhengHei", sans-serif;
        color: #eee;
    }

    /* æ¨™é¡Œèˆ‡åˆ†éš”ç·š */
    .dol-header {
        text-align: center;
        margin-bottom: 20px;
        border-bottom: 1px solid #333;
        padding-bottom: 10px;
    }
    .dol-header h1 {
        margin: 0;
        color: #ff7ae6; /* ç²‰è‰²æ¨™é¡Œ */
        font-size: 1.8em;
    }

    /* è¨­å®šå€å¡Š (Fieldset) */
    .dol-fieldset {
        border: 1px solid #555;
        background-color: #1a1a1a;
        margin-bottom: 15px;
        padding: 10px 15px;
        border-radius: 4px;
    }
    .dol-legend {
        color: #66ccff; /* è—è‰²å°æ¨™é¡Œ */
        font-weight: bold;
        font-size: 0.9em;
        padding: 0 5px;
        background-color: #111; /* è®“æ¨™é¡ŒèƒŒæ™¯èˆ‡ä¸»å®¹å™¨ä¸€è‡´ */
        border: 1px solid #555;
    }

    /* å–®è¡Œè¨­å®šé … (Flexbox å°é½Š) */
    .dol-row {
        display: flex;
        justify-content: space-between; /* å·¦å³å°é½Š */
        align-items: center;            /* å‚ç›´ç½®ä¸­ */
        margin-bottom: 8px;
        padding-bottom: 5px;
        border-bottom: 1px dashed #333; /* è™›ç·šåˆ†éš” */
    }
    .dol-row:last-child {
        border-bottom: none;
        margin-bottom: 0;
    }

    /* æ¨™ç±¤èˆ‡è¼¸å…¥æ§åˆ¶é … */
    .dol-label {
        color: #ccc;
        font-weight: bold;
    }
    .dol-input {
        display: flex;
        align-items: center;
        gap: 5px;
    }

    /* è¦†è“‹é»˜èªè¼¸å…¥æ¡†æ¨£å¼ */
    .dol-container input[type="text"], 
    .dol-container select {
        background-color: #222;
        color: #fff;
        border: 1px solid #666;
        padding: 4px 8px;
        border-radius: 3px;
        max-width: 180px;
    }
    .dol-container button {
        background-color: #333;
        border: 1px solid #777;
        color: #eee;
        cursor: pointer;
        padding: 4px 8px;
        font-size: 0.9em;
        transition: background 0.2s;
    }
    .dol-container button:hover {
        background-color: #555;
        border-color: #999;
    }

    /* åº•éƒ¨æŒ‰éˆ•å€ */
    .dol-actions {
        text-align: center;
        margin-top: 20px;
        display: flex;
        justify-content: center;
        gap: 15px;
    }
    .dol-actions a {
        display: inline-block;
        padding: 8px 15px;
        background: #333;
        border: 1px solid #ff7ae6;
        color: #ff7ae6;
        text-decoration: none;
        border-radius: 4px;
    }
    .dol-actions a:hover {
        background: #ff7ae6;
        color: #000;
    }
</style>

<div class="dol-container">
    /* --- æ¨™é¡Œå€ --- */
    <div class="dol-header">
        <h1>âœ¦ åˆå§‹è¨­å®š âœ¦</h1>
        <div style="font-size: 0.8em; color: #888; margin-top: 5px;">æ­¡è¿ä¾†åˆ°ã€Šæ…¾é–€ã€‹ï¼Œè«‹ç¢ºèªå¦³çš„èº«ä»½è³‡è¨Š</div>
    </div>

    /* --- èº«ä»½è¨­å®šå€å¡Š --- */
    <fieldset class="dol-fieldset">
        <legend class="dol-legend">ğŸ‘¤ èº«ä»½è³‡è¨Š</legend>
        
        <div class="dol-row">
            <span class="dol-label">ğŸ“‡ æœ¬å</span>
            <span class="dol-input"><<textbox "$name" "æ¬ç¾½">></span>
        </div>
        
        <div class="dol-row">
            <span class="dol-label">ğŸ·ï¸ æš±ç¨±</span>
            <span class="dol-input"><<textbox "$nick" "ç¾½å…’">></span>
        </div>
    </fieldset>

    /* --- AI é€£çµè¨­å®šå€å¡Š --- */
    <fieldset class="dol-fieldset">
        <legend class="dol-legend">ğŸ¤– AI é€£çµè¨­å®š (Google AI Studio)</legend>
        
        /* æ¨¡å‹é¸æ“‡ */
        <div class="dol-row">
            <span class="dol-label">ğŸ§  æ¨¡å‹é¸æ“‡</span>
            <span class="dol-input">
                <<listbox "$aiModel" autoselect>>
                    <<option "Gemini 3 Flash (å¿«é€Ÿ)" "gemini-3-flash-preview">>
                    <<option "Gemini 3 Pro (å¼·å¤§)" "gemini-3-pro-preview">>
                <</listbox>>
            </span>
        </div>

        /* èˆŠé‡‘é‘°åˆ‡æ› (è‹¥æœ‰) */
        <<if $keyVault.length > 0>>
            <div class="dol-row">
                <span class="dol-label">ğŸ”‘ åˆ‡æ›é‡‘é‘°</span>
                <span class="dol-input">
                    <<listbox "$apiKey" autoselect>>
                        <<optionsfrom $keyVault>>
                    <</listbox>>
                    <<button "âœ…">>
                        <<run memorize("apiKey", $apiKey)>>
                        <<run memorize("aiModel", $aiModel)>>
                        <<run UI.alert("å·²åˆ‡æ›ä¸¦è¨˜æ†¶é‡‘é‘°ï¼")>>
                    <</button>>
                </span>
            </div>
        <</if>>

        /* æ–°å¢é‡‘é‘° */
        <div class="dol-row">
            <span class="dol-label">â• æ–°å¢é‡‘é‘°</span>
            <span class="dol-input">
                <<textbox "_newKey" "">>
                <<button "ğŸ’¾">>
                    <<if _newKey neq "">>
                        <<run $keyVault.pushUnique(_newKey)>>
                        <<set $apiKey to _newKey>>
                        <<run memorize("apiKey", $apiKey)>>
                        <<run memorize("keyVault", $keyVault)>>
                        <<run memorize("aiModel", $aiModel)>>
                        <<goto "Start">> /* åˆ·æ–°é é¢ */
                    <</if>>
                <</button>>
            </span>
        </div>
    </fieldset>

    /* --- åº•éƒ¨æŒ‰éˆ•å€ --- */
    <div class="dol-actions">
        [[é–‹å§‹ AI äº’å‹•->Action_Handler][$player_act = "ç©å®¶é†’ä¾†ï¼Œè§€å¯Ÿå››å‘¨"]]
    </div>

</div>